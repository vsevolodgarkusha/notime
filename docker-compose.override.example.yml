# Development overrides EXAMPLE
# Copy this file to docker-compose.override.yml for local development:
#   cp docker-compose.override.example.yml docker-compose.override.yml
#
# Then just run: docker compose up
# The override file is automatically picked up by docker compose
#
# For production use: docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d

services:
  # ВНИМАНИЕ: это dev-настройки (локальная разработка). Не используйте в production.

  postgres:
    ports:
      - "5432:5432"

  redis:
    ports:
      - "6379:6379"

  llm-service:
    ports:
      - "8005:8000"

  backend:
    ports:
      - "8001:8001"
    environment:
      - CORS_ORIGINS=http://localhost,http://localhost:8080,http://localhost:5173

  flower:
    ports:
      - "5555:5555"

  frontend:
    ports:
      - "8080:80"  # localhost:8080 for dev
    volumes:
      - ./frontend/nginx.dev.conf:/etc/nginx/conf.d/default.conf:ro
    command: ["nginx", "-g", "daemon off;"]  # Simple nginx, no reload loop

  telegram-bot:
    environment:
      - PUBLIC_DOMAIN=http://localhost:8080
      - WEBAPP_URL=http://localhost:8080
